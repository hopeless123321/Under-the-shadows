[gd_scene load_steps=16 format=3 uid="uid://cndr886j3r16p"]

[ext_resource type="PackedScene" uid="uid://dyejlaprpu8ve" path="res://Scenes/Testing scenes/Camera/camera_2d.tscn" id="1_bmcg2"]
[ext_resource type="Script" path="res://UI/Particles/Gpu ash generate.gd" id="2_kkhwf"]
[ext_resource type="TileSet" uid="uid://b1sx67xs8rg80" path="res://Tile/tilesets/first try.tres" id="3_j5rqp"]
[ext_resource type="Script" path="res://Scenes/Testing scenes/Template level/tile_map.gd" id="4_yw4of"]
[ext_resource type="Script" path="res://Scenes/Testing scenes/Template level/Manager.gd" id="5_kxbvo"]
[ext_resource type="PackedScene" uid="uid://b0v8e7ytofvta" path="res://UI/Scene/UI battle/Scene/UI battle.tscn" id="6_rgf26"]
[ext_resource type="Script" path="res://Scenes/Testing scenes/Template level/Regeneration button.gd" id="9_kuijj"]
[ext_resource type="PackedScene" uid="uid://cqoe8jc5ucobr" path="res://UI/Scene/UI battle/Scene/Menu in gameplay.tscn" id="11_c1s0i"]

[sub_resource type="Gradient" id="Gradient_64sni"]
colors = PackedColorArray(1, 0.605667, 0.09, 1, 0.295867, 0.295866, 0.295866, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_rgh4t"]
gradient = SubResource("Gradient_64sni")

[sub_resource type="Curve" id="Curve_ugfih"]
_data = [Vector2(0.119658, 0.0219779), 0.0, 0.0, 0, 0, Vector2(1, 0.560439), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_d8uos"]
curve = SubResource("Curve_ugfih")

[sub_resource type="Curve" id="Curve_sq323"]
_data = [Vector2(0, 0), 0.0, 4.9916, 0, 0, Vector2(0.179487, 1), 0.0, 0.0, 0, 0, Vector2(0.764957, 1), -0.0378155, -0.0378155, 0, 0, Vector2(1, 0), -5.31428, 0.0, 0, 0]
point_count = 4

[sub_resource type="CurveTexture" id="CurveTexture_ktfgo"]
curve = SubResource("Curve_sq323")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_ei55w"]
particle_flag_align_y = true
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(640, 0, 0)
angle_min = -33.0
angle_max = 98.9
gravity = Vector3(0, 98, 0)
scale_min = 2.0
scale_max = 4.0
scale_curve = SubResource("CurveTexture_ktfgo")
color_ramp = SubResource("GradientTexture1D_rgh4t")
emission_curve = SubResource("CurveTexture_d8uos")
hue_variation_min = -0.15
hue_variation_max = 0.09
turbulence_enabled = true
turbulence_noise_speed = Vector3(0.65, -0.175, 0)
turbulence_noise_speed_random = 1.13
turbulence_influence_max = 0.235

[node name="Template_level_node" type="Node2D"]

[node name="Camera2D" parent="." instance=ExtResource("1_bmcg2")]
limit_left = -256
limit_top = -256
editor_draw_limits = true

[node name="GPUParticles2D" type="GPUParticles2D" parent="."]
z_index = 1000
position = Vector2(41.745, 0)
amount = 300
process_material = SubResource("ParticleProcessMaterial_ei55w")
lifetime = 40.0
preprocess = 20.0
visibility_rect = Rect2(0, -500, 3000, 3000)
trail_lifetime = 0.37
script = ExtResource("2_kkhwf")

[node name="TileMap" type="TileMap" parent="."]
tile_set = ExtResource("3_j5rqp")
format = 2
layer_0/name = "Floor, triggers, traps"
layer_1/name = "obstacle, upper_trigger"
layer_1/tile_data = PackedInt32Array()
layer_2/name = "fill_floor"
layer_2/tile_data = PackedInt32Array()
layer_3/name = "wall"
layer_3/tile_data = PackedInt32Array()
script = ExtResource("4_yw4of")

[node name="Units" type="Node2D" parent="."]
script = ExtResource("5_kxbvo")

[node name="Ally" type="Node2D" parent="Units"]

[node name="Enemy" type="Node2D" parent="Units"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Button" type="Button" parent="CanvasLayer"]
anchors_preset = -1
anchor_left = 0.016
anchor_top = 0.441
anchor_right = 0.091
anchor_bottom = 0.5
offset_left = 0.519999
offset_top = -0.240021
offset_right = -0.480011
offset_bottom = -7.0
text = "новый ход
"
metadata/_edit_use_anchors_ = true

[node name="Button2" type="Button" parent="CanvasLayer"]
anchors_preset = -1
anchor_left = 0.015
anchor_top = 0.503
anchor_right = 0.206
anchor_bottom = 0.552
offset_left = -0.200001
offset_top = 0.0799866
offset_right = 0.319977
offset_bottom = -0.280029
text = "загрузка следующего уровня"
script = ExtResource("9_kuijj")
metadata/_edit_use_anchors_ = true

[node name="Menu in gameplay" parent="CanvasLayer" instance=ExtResource("11_c1s0i")]
visible = false
z_index = 1

[node name="UI" parent="CanvasLayer" instance=ExtResource("6_rgf26")]
mouse_filter = 2
metadata/_edit_use_anchors_ = true

[connection signal="pressed" from="CanvasLayer/Button" to="Units" method="_on_button_pressed"]
[connection signal="pressed" from="CanvasLayer/Button2" to="CanvasLayer/Button2" method="_on_pressed"]

[editable path="CanvasLayer/UI"]
